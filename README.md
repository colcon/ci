# Colcon CI

This repository contains both a GitHub action and a reusable workflow.

## Action

The action (`action.yaml`) does the following:

1. Sets up a virtual environment
2. Installs the package under test
3. Installs necessary dependencies
4. Runs tests using `pytest`
5. Tests publishing of the package (optional)

## Reusable Workflow

The reusable workflow (`pytest.yaml`) does the following:

1. Generates a strategy of which Python and OS versions to test
2. For the matrix of Python and OS versions:
    1. Sets up Python
    3. Runs the test action described above
    2. Uploads code coverage (optional)

The strategy is generated by `genstrat.py` which is a small utility to generate
a `strategy.json` file. Refer to `genstrat.py --help` for usage, including
default values for OS and Python versions in the strategy matrix. Refer to
`pytest.yaml` for how to specify arguments to the reusable workflow, which
ultimately calls `genstrat.py`.
