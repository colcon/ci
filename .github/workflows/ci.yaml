name: Run tests

on:
  push:
    branches: ['main']
  pull_request:
  workflow_dispatch:

jobs:
  canary:
    uses: ./.github/workflows/pytest.yaml
    with:
      # Choose colcon-notification for a canary build. It has colcon
      # dependencies and debian patches, so exercieses a fair amount of the
      # CI action features.
      repository: colcon/colcon-notification
      # Use HEAD to find strategy.json file instead of the tip of colcon/ci
      setup-repository: ''
